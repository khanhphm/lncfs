(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(10),o=a.n(l),r=(a(86),a(87),a(13)),s=(a(88),a(30)),i=a.n(s),m=i.a.initializeApp({apiKey:"AIzaSyDXoAh_QUB-N1OSNwf73K6qmMJbCyYAptQ",authDomain:"social-net-58b1b.firebaseapp.com",databaseURL:"https://social-net-58b1b.firebaseio.com",projectId:"social-net-58b1b",storageBucket:"social-net-58b1b.appspot.com",messagingSenderId:"994549662084",appId:"1:994549662084:web:e77ccead4c56c2271b1dd1"}).firestore(),u=i.a.auth(),d=i.a.storage(),p=(a(99),a(69)),g=a(5),f=a(152),E=a(157),b=a(147),v=a(149),h=a(150),y=a(148),N=a(66),_=a.n(N),j=a(109),w=(a(155),a(154)),C=(Object(g.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,l=Object(p.a)(e,["children","classes","onClose"]);return c.a.createElement(b.a,Object.assign({disableTypography:!0,className:a.root},l),c.a.createElement(j.a,{variant:"h6"},t),n?c.a.createElement(y.a,{"aria-label":"close",className:a.closeButton,onClick:n},c.a.createElement(_.a,null)):null)})),Object(g.a)((function(e){return{root:{padding:e.spacing(2)}}}))(v.a)),O=Object(g.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(h.a);function x(e){var t=e.label,a=Object(n.useState)(!1),l=Object(r.a)(a,2),o=l[0],s=l[1],i=function(){s(!1)};var m=Object(n.useState)(""),d=Object(r.a)(m,2),p=d[0],g=d[1],b=Object(n.useState)(""),v=Object(r.a)(b,2),h=v[0],y=v[1];return c.a.createElement("div",null,c.a.createElement(f.a,{onClick:function(){s(!0)}},t),c.a.createElement(E.a,{onClose:i,"aria-labelledby":"customized-dialog-title",open:o},c.a.createElement(C,{dividers:!0},c.a.createElement("div",{style:{display:"flex",flexDirection:"column",maxWidth:"400px",minWidth:"300px"}},c.a.createElement(w.a,{variant:"outlined",placeholder:"Email",type:"text",style:{marginTop:"30px"},value:p,onChange:function(e){return g(e.target.value)}}),c.a.createElement(w.a,{variant:"outlined",placeholder:"Password",type:"password",value:h,style:{marginTop:"20px"},onChange:function(e){return y(e.target.value)}}))),c.a.createElement(O,null,c.a.createElement(f.a,{autoFocus:!0,type:"submit",onClick:function(e){e.preventDefault(),u.signInWithEmailAndPassword(p,h).catch((function(e){return alert(e.message)})),i()}},"\u0110\u0103ng Nh\u1eadp"),c.a.createElement(f.a,{autoFocus:!0,type:"submit",onClick:function(e){e.preventDefault(),u.createUserWithEmailAndPassword(p,h).then((function(e){e.user.updateProfile({displayName:"".concat(p.match(/^([^@]*)@/)[1])})})).catch((function(e){return alert(e.message)})),i()},color:"primary"},"\u0110\u0103ng K\xfd"))))}var I=function(e){var t=e.comments,a=e.id,l=e.user,o=Object(n.useState)(""),s=Object(r.a)(o,2),i=s[0],u=s[1],d=Object(n.useState)(t||[]),p=Object(r.a)(d,2),g=p[0];return p[1],c.a.createElement("div",null,l?c.a.createElement("div",{className:"commentInput"},c.a.createElement("textarea",{rows:"1",value:i,onChange:function(e){return u(e.target.value)},className:"commentInput__textarea",placeholder:"Add a comment.."}),c.a.createElement("button",{onClick:function(){g.push({comment:i,username:l.displayName}),m.collection("posts").doc(a).update({comments:g}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)})),u("")},className:"button commentInput__button",style:{color:i?"gray":"lightgrey",fontWeight:i?"600":"500"}},"Post")):c.a.createElement("div",{style:{marginTop:"30px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},c.a.createElement(x,{label:"\u0110\u0103ng Nh\u1eadp/\u0110\u0103ng k\xfd"}),c.a.createElement("p",null,"\u0111\u1ec3 vi\u1ebft Comment")))};a(104);var k=function(e){var t=e.username,a=e.comment;return c.a.createElement("div",{className:"comment"},c.a.createElement("p",null,c.a.createElement("strong",null,t)," ",a))};var S=function(e){var t=e.id,a=e.userName,n=e.postImageUrl,l=e.caption,o=e.comments,r=e.user;return c.a.createElement("div",{className:"post"},c.a.createElement("div",{className:"post__header"},c.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},c.a.createElement("div",{className:"post__headerInfo"},c.a.createElement("strong",{style:{fontSize:"14px"}},"CONFESSION"))),r&&r.displayName===a?c.a.createElement("button",{className:"button","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(){m.collection("posts").doc(t).delete().then((function(){console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)}))}},"Delete"):c.a.createElement(c.a.Fragment,null)),c.a.createElement("img",{className:"post__image",src:n}),c.a.createElement("div",{className:"post__bottom"},c.a.createElement("p",null,c.a.createElement("strong",null,"CFS: ")," ",c.a.createElement("br",null)," ",l)),o?o.map((function(e){return c.a.createElement(k,{username:e.username,comment:e.comment})})):c.a.createElement(c.a.Fragment,null),c.a.createElement(I,{comments:o,id:t,user:r}))};a(105);var U=function(e){var t=e.user,a=Object(n.useState)([]),l=Object(r.a)(a,2),o=l[0],s=l[1];return Object(n.useEffect)((function(){m.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),c.a.createElement("div",{className:"feed"},c.a.createElement("div",{className:"feed__posts"},o.map((function(e){var a=e.id,n=e.post;return c.a.createElement(S,{key:a,id:a,userProfileUrl:n.userProfileUrl,userName:n.userName,postImageUrl:n.postImageUrl,caption:n.caption,comments:n.comments,user:t})}))))},B=a(68),P=a(159),A=(a(106),a(158));var D=function(e){var t,a=e.user,n=c.a.useState(null),l=Object(r.a)(n,2),o=l[0],s=l[1];return c.a.createElement("div",{className:"header"},c.a.createElement("img",{className:"header__LeftLogo",src:"http://bizweb.dktcdn.net/thumb/grande/100/343/398/products/download-94a10140-7042-4f87-88c0-dbaed413dcef.jpg?v=1567497298410",alt:""}),a?c.a.createElement("div",{className:"header__Right"},c.a.createElement(A.a,{className:"header__RightProfileImg",onClick:function(e){s(e.currentTarget)},style:{height:"25px",width:"25px"}},null===(t=a.displayName)||void 0===t?void 0:t.charAt(0)),c.a.createElement(B.a,{id:"simple-menu",anchorEl:o,keepMounted:!0,open:Boolean(o),onClose:function(){s(null)}},c.a.createElement(P.a,{onClick:function(){return u.signOut()}},"\u0110\u0103ng Xu\u1ea5t"))):c.a.createElement(x,{label:"\u0110\u0103ng Nh\u1eadp/\u0110\u0103ng K\xfd"}))},T=(a(107),a(67)),F=a.n(T),L=a(153);var W=function(e){var t=e.user,a=Object(n.useState)(""),l=Object(r.a)(a,2),o=l[0],s=l[1],u=Object(n.useState)(null),p=Object(r.a)(u,2),g=p[0],f=p[1],E=Object(n.useState)(0),b=Object(r.a)(E,2),v=b[0],h=b[1];return c.a.createElement("div",{className:"app__createPost"},t?c.a.createElement("div",{className:"imageUpload"},c.a.createElement("div",{className:"createAPost__Top"},c.a.createElement("p",null,"Vi\u1ebft Confession t\u1ea1i \u0111\xe2y")),c.a.createElement("div",{className:"createAPost__center"},c.a.createElement("textarea",{className:"createAPost__textarea",name:"create a post",rows:"2",value:o,placeholder:"Enter a caption...",onChange:function(e){return s(e.target.value)}}),c.a.createElement("div",{className:"imagePreview"},c.a.createElement("img",{onClick:function(){document.getElementById("image-1-preview").style.display="none"},id:"image-1-preview",alt:""}),0===v?c.a.createElement(c.a.Fragment,null):c.a.createElement(L.a,{className:"circularProgress",variant:"determinate",value:v}))),c.a.createElement("div",{className:"imageUpload__bottom"},c.a.createElement("div",{className:"image-upload"},c.a.createElement("label",{htmlFor:"file-input"},c.a.createElement(F.a,{style:{marginTop:"5px"}})),c.a.createElement("input",{id:"file-input",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){f(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),a=document.getElementById("image-1-preview");a.src=t,a.style.display="block"}}})),c.a.createElement("button",{className:"button",onClick:function(){g?d.ref("images/".concat(g.name)).put(g).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);h(t)}),(function(e){console.log(e),alert(e.message)}),(function(){d.ref("images").child(g.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:o,postImageUrl:e,userName:t.displayName.toLowerCase(),userProfileUrl:"https://avatars0.githubusercontent.com/u/55942632?s=460&u=f702a3d87d1f9c125f1ead9b3bec93d26cd3b3a0&v=4"})})),h(0),s(""),f(null),document.getElementById("image-1-preview").style.display="none"})):(m.collection("posts").add({timestamp:i.a.firestore.FieldValue.serverTimestamp(),caption:o,postImageUrl:"https://firebasestorage.googleapis.com/v0/b/social-net-58b1b.appspot.com/o/Confession%20%C4%90%E1%BA%B7c%20Bi%E1%BB%87t.png?alt=media&token=e06953e1-158c-49f0-89b2-23d5ef6bbeb4",userName:t.displayName.toLowerCase(),userProfileUrl:"https://avatars0.githubusercontent.com/u/55942632?s=460&u=f702a3d87d1f9c125f1ead9b3bec93d26cd3b3a0&v=4"}),h(0),s(""),f(null),document.getElementById("image-1-preview").style.display="none")},style:{color:o?"gray":"lightgrey",fontWeight:o?"600":"500"}},"Upload"))):c.a.createElement("div",{style:{marginTop:"30px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},c.a.createElement(x,{label:"\u0110\u0103ng Nh\u1eadp/\u0110\u0103ng k\xfd"}),c.a.createElement("p",null,"\u0111\u1ec3 vi\u1ebft Confession v\xe0 Comment")))};var R=function(){var e=Object(n.useState)(null),t=Object(r.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=u.onAuthStateChanged((function(e){e?(console.log(e),l(e),console.log("user has logged in")):(l(null),console.log("user has logged out"))}));return function(){e()}}),[]),c.a.createElement("div",{className:"home"},c.a.createElement(D,{user:a}),c.a.createElement("div",{className:"app__body"},c.a.createElement(W,{user:a}),c.a.createElement(U,{user:a})))};var z=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(R,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},81:function(e,t,a){e.exports=a(108)},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},99:function(e,t,a){}},[[81,1,2]]]);
//# sourceMappingURL=main.8ca0b1ee.chunk.js.map